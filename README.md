## üéØ Landing Platform API

–ë—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∫—É—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –±–æ–Ω—É—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç  
- üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞  
- üîó –°–≤—è–∑—å –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏  
- üóÉÔ∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã  
- üßπ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ  
- üß™ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API  
- üìä Excel-–æ—Ç—á—ë—Ç—ã  
- üåê –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ  
- üñºÔ∏è –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π  
- üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤  

---

## üó∫ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

![–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](LendingAPI/docs/architecture.svg)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
dotnet ef database update --startup-project ./LendingAPI --project ./Landing.Infrastructure
```

–î–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤ `appsettings.json`:

```json
"ConnectionStrings": {
  "DefaultConnection": "Host=localhost;Port=5432;Database=landing_db;Username=postgres;Password=your_password"
}
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- **ASP.NET Core Web API (.NET 8)**  
- **Entity Framework Core + PostgreSQL**  
- **JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Å Refresh-—Ç–æ–∫–µ–Ω–∞–º–∏**  
- **–†–æ–ª–∏ –∏ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∞–¥–º–∏–Ω, –∫—É—Ä–∞—Ç–æ—Ä)  
- **–°–∏—Å—Ç–µ–º–∞ –±–∞–ª–ª–æ–≤ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏**  
- **Hangfire** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏  
- **Swagger / OpenAPI** ‚Äî –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è  

---

## üîó –°–≤—è–∑—å –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏

–ö—É—Ä–∞—Ç–æ—Ä—ã (`User`) –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º —Ç–∏–ø–∞ `CuratedEvent`. –°–≤—è–∑—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É `UserCuratedEvents` (many-to-many).

**–ú–æ–¥–µ–ª—å `User`:**
```csharp
public virtual ICollection<CuratedEvent> CuratedEvents { get; set; }
```

**–ú–æ–¥–µ–ª—å `CuratedEvent`:**
```csharp
public virtual ICollection<User> Curators { get; set; }
```

**Fluent API –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```csharp
builder
    .HasMany(e => e.Curators)
    .WithMany(u => u.CuratedEvents)
    .UsingEntity<Dictionary<string, object>>(
        "UserCuratedEvents",
        j => j.HasOne<User>().WithMany().HasForeignKey("UserId").OnDelete(DeleteBehavior.Cascade),
        j => j.HasOne<CuratedEvent>().WithMany().HasForeignKey("CuratedEventId").OnDelete(DeleteBehavior.Cascade),
        j =>
        {
            j.HasKey("UserId", "CuratedEventId");
            j.ToTable("UserCuratedEvents");
        });
```

---

## üóÉÔ∏è –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

| –¢–∞–±–ª–∏—Ü–∞                 | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                     |
|-------------------------|-----------------------------------------------|
| `Users`                 | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã                          |
| `Events`                | –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö              |
| `CuratedEvents`         | –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —Å –∫—É—Ä–∞—Ç–æ—Ä–∞–º–∏                     |
| `UserCuratedEvents`     | –°–≤—è–∑–∏ –º–µ–∂–¥—É –∫—É—Ä–∞—Ç–æ—Ä–∞–º–∏ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏       |
| `UserRoles`             | –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π                           |
| `EventAttendances`      | –£—á—ë—Ç –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π                |
| `UserPointsTransactions`| –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤                 |
| `RefreshTokens`         | –û–±–Ω–æ–≤–ª—è—é—â–∏–µ JWT-—Ç–æ–∫–µ–Ω—ã                       |
| `News`                  | –ù–æ–≤–æ—Å—Ç–∏ –∏ –æ–±—ä—è–≤–ª–µ–Ω–∏—è                         |
| `NewsImages`            | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫ –Ω–æ–≤–æ—Å—Ç—è–º        |

---

## üßπ –ö–∞—Å–∫–∞–¥–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

- –ü—Ä–∏ **—É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: —Å–≤—è–∑–∏ —Å –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º–∏ (`UserCuratedEvents`) —É–¥–∞–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏  
- –ü—Ä–∏ **—É–¥–∞–ª–µ–Ω–∏–∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è**: –≤—Å–µ –ø—Ä–∏–∫—Ä–µ–ø–ª—ë–Ω–Ω—ã–µ –∫—É—Ä–∞—Ç–æ—Ä—ã –æ—Ç–≤—è–∑—ã–≤–∞—é—Ç—Å—è  
- –û—á–∏—Å—Ç–∫–∞ –º—É—Å–æ—Ä–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é —Å –ø–æ–º–æ—â—å—é Hangfire  

---

## üß™ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API

‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ Email  
‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT + Refresh Tokens  
‚úÖ –†–æ–ª–∏: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∫—É—Ä–∞—Ç–æ—Ä  
‚úÖ CRUD –¥–ª—è –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π  
‚úÖ –ó–∞–ø–∏—Å—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —è–≤–∫–∏  
‚úÖ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫—É—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π  
‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∏ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∞–ª–ª–æ–≤  
‚úÖ Excel-–æ—Ç—á—ë—Ç—ã –∑–∞ –º–µ—Å—è—Ü  
‚úÖ –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (Hangfire):  
- –£–¥–∞–ª–µ–Ω–∏–µ –º—É—Å–æ—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
- –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ –Ω–∞ –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è  
‚úÖ –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ VK  
‚úÖ –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ –Ω—É–∂–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤  

---

## üìä Excel-–æ—Ç—á—ë—Ç—ã

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç –∑–∞ –º–µ—Å—è—Ü:

**–õ–∏—Å—Ç 1:** –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
| –§–ò–û | –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è | Email | –ö–æ–ª-–≤–æ –±–∞–ª–ª–æ–≤ |

**–õ–∏—Å—Ç 2:** –ü–æ—Å–µ—â–µ–Ω–∏—è –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π  
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –ø–æ —Å—Ç—Ä–æ–∫–∞–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ —Å—Ç–æ–ª–±—Ü–∞–º. –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª ‚Äî –æ—Ç–º–µ—á–µ–Ω–æ "‚úî".

–§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **ClosedXML**.

---

## üåê –ò–º–ø–æ—Ä—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥—Ä—É–ø–ø–æ–π VK: [vk.com/club230102867](https://vk.com/club230102867)

- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ VK API  
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –≤–ª–æ–∂–µ–Ω–∏–π  
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `NewsImages`  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ –∏ –≤–∏–¥–µ–æ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–∞ –∏ –≥—Ä—É–ø–ø—ã —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `appsettings.json`.

---

## üñºÔ∏è –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

–ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:

- –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è 3 –≤–µ—Ä—Å–∏–∏: `512x380`, `256x190`, `128x95`
- –û—Ä–∏–≥–∏–Ω–∞–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –º–∏–Ω–∏–∞—Ç—é—Ä–∞–º–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥ –±—ã—Å—Ç—Ä—É—é –æ—Ç–¥–∞—á—É –Ω–∞ —Ñ—Ä–æ–Ω—Ç

–§–∞–π–ª—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–µ—Ñ–∏–∫—Å—ã/–ø–∞–ø–∫–∏.

---

## üß™ –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### üîë –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

```http
POST /api/auth/login
Content-Type: application/json

{
  "email": "admin@mail.com",
  "password": "password123"
}
```

---

### üßç –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

```http
POST /api/auth/register
Content-Type: application/json

{
  "fullName": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@mail.com",
  "password": "password123",
  "birthdate": "2000-01-01"
}
```

---

### üì∞ –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ (—Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏)

```http
POST /api/news
Authorization: Bearer {token}
Content-Type: multipart/form-data

Form fields:
- Title: "–ù–æ–≤–∞—è –Ω–æ–≤–æ—Å—Ç—å"
- Content: "–ö–æ–Ω—Ç–µ–Ω—Ç"
- Image: (–æ—Å–Ω–æ–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)
- AdditionalImages[]: (–¥–æ–ø. –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
```

---

### üì• –ó–∞–ø–∏—Å—å –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ

```http
POST /api/events/{eventId}/register
Authorization: Bearer {token}
```

---

### ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —è–≤–∫–∏ (–∞–¥–º–∏–Ω–æ–º)

```http
POST /api/events/{eventId}/attendance/{userId}/confirm
Authorization: Bearer {admin_token}
```
